#!/usr/bin/env python2

from sys import argv, exit
import os.path as op
import subprocess as sp

try:
    interface = argv[1]
except IndexError:
    interface = 'eth0'
try:
    label = argv[2]
except IndexError:
    label = 'E'

with open(op.join('/sys/class/net', interface, 'operstate')) as operstatefh:
    state = operstatefh.readline().rstrip()

if  state != 'up':
    # full text
    print label, "down"
    # short text
    print label, "down"
    print "#FF0000"
    exit(0)

ipaddr = sp.check_output(['ip', '-o', 'addr', 'show', 'dev', interface])
ip4addr = ipaddr.split()[3].split('/')[0]
#ip6addr = ipaddr.split('\n')[1].split()[3].split('/')[0]

# full text
print label, ip4addr
# short text
print label, ip4addr
